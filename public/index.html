<!doctype html>
<html lang="en">

<head>
  <title>plowderye</title>
  <link rel="stylesheet" href="/bower_components/normalize-css/normalize.css"></link>
  <link rel="stylesheet" href="/bower_components/unsemantic/assets/stylesheets/unsemantic-grid-responsive.css"></link>
  <link rel="stylesheet"
  href="/css/custom-bootstrap/bootstrap.min.css"></link>
  <link rel="stylesheet" href="/css/plowderye.css"></link>
</head>

<body>
<div class="content grid-container" ng-app="plowderye">

  <!-- list of conversations -->
  <div class="grid-20 grid-parent">
    <div class="margins panel panel-default">
      <div class="panel-heading">Your Conversations</div>
      <div class="list-group" ng-controller="ConvListCtrl">
        <a href="#" ng-repeat="conversation in getConversations()"
          ng-bind="conversation.name"
          ng-click="join(conversation)"
          ng-class="conversation.getCssClasses()"
          >
        </a>
      </div>
    </div>
  </div>

  <!-- current conversation headline and config controls -->
  <div class="grid-80 grid-parent">
    <div class="margins rd-border light-grey-bg">
      <div ng-controller="HeadlineCtrl"
         class="expand-left-container current-conversation">
        <span ng-bind="getCurrentConversationName()"
          class="expand-left-left">
        </span>
      </div>
      <div class="expand-left-right">
        <div ng-controller="ConfigCtrl"
          class="config-controls">
          <img ng-click="toggleNotifications()"
            class="ctrl-img"
            ng-src="/images/{{getNotificationsImage()}}"
            alt="toggle notifications"
            title="{{getNotficationsTooltip()}}"
          ><img ng-click="toggleSound()"
            class="ctrl-img"
            ng-src="/images/{{getSoundImage()}}"
            alt="toggle sound"
            title="{{getSoundTooltip()}}"
          >
        </div>
      </div>
    </div>

    <!-- area for current conversation -->
    <div class="grid-80 grid-parent">
      <div class="margins">

        <!-- conversation log - displays past chat messages -->
        <div ng-controller="MessageLogCtrl" class="conv-log rd-border">
          <div
            ng-repeat="message in getMessages()"
            ng-class="message.classes">
            <div ng-bind="message.formattedTime"
              class="message-time">
            </div>
            <span ng-bind="message.formattedSender"
              class="message-from">
            </span>
            <span ng-bind="message.formattedText"
              class="message-text">
            </span>
          </div>
        </div>

        <!-- compose new message -->
        <form id="send-form" role="form" ng-controller="SendMessageCtrl">
           <div class="expand-left-container form-group">
            <label class="sr-only" for="message">What's up?</label>
            <input id="message"
              ng-model="messageText"
              type="text"
              class="expand-left-left form-control"
              placeholder="What's up?">
          </div>
          <span class="span-send expand-left-right">
            <button ng-click="sendMessage()"
              class="btn btn-primary">Send</button>
          </span>
        </form>
        <div class="help">
          Chat commands:
          <ul>
            <li>Change nickname: <code>/nick [username]</code></li>
            <li>Join/create conversation: <code>/join [conversation name]</code></li>
          </ul>
          powered by <em>plowderye</em>.
        </div>
      </div>
    </div>

    <!-- user list -->
    <div class="grid-20 grid-parent">
      <div class="margins panel panel-default">
        <div class="panel-heading">Users</div>
        <div class="panel-body" ng-controller="UserListCtrl">
          <div ng-repeat="user in users"
            ng-bind="user">
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- sound div to add and remove audio element -->
  <div id="sound"></div>
</div>

<script src="/socket.io/socket.io.js" type="text/javascript"></script>
<script src="/bower_components/jquery/dist/jquery.min.js" type="text/javascript"></script>
<script src="/bower_components/jquery-cookie/jquery.cookie.js" type="text/javascript"></script>
<script src="/bower_components/angular/angular.js" type="text/javascript"></script>
<script src="bower_components/angular-socket-io/socket.js" type="text/javascript"></script>
<script src="/bower_components/notify.js/notify.js" type="text/javascript"></script>

<script src="/js/plowderye.js" type="text/javascript"></script>
<script src="/js/init.js" type="text/javascript"></script>
<script src="/js/factory/socket.js" type="text/javascript"></script>

<script src="/js/service/conversation.js" type="text/javascript"></script>
<script src="/js/service/command.js" type="text/javascript"></script>
<script src="/js/service/message.js" type="text/javascript"></script>
<script src="/js/service/user.js" type="text/javascript"></script>
<script src="/js/service/sound.js" type="text/javascript"></script>
<script src="/js/service/notification.js" type="text/javascript"></script>

<script src="/js/controller/conversation-list.js" type="text/javascript"></script>
<script src="/js/controller/headline.js" type="text/javascript"></script>
<script src="/js/controller/config.js" type="text/javascript"></script>
<script src="/js/controller/message-log.js" type="text/javascript"></script>
<script src="/js/controller/send-message.js" type="text/javascript"></script>
<script src="/js/controller/user-list.js" type="text/javascript"></script>

</body>
</html>
